{"version":3,"file":"modals.min.js","sources":["../src/modals.js"],"sourcesContent":["// This file is part of a 3rd party created module for Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * File.\n *\n * @module     block_credits/modals\n * @copyright  2023 Institut français du Japon\n * @author     Frédéric Massart <fred@branchup.tech>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport ModalForm from 'core_form/modalform';\nimport {get_string as getString} from 'core/str';\n\nexport const registerAddCreditButton = (selector) => {\n  document.querySelector(selector).addEventListener('click', (e) => {\n    const userId = e.currentTarget.dataset.userid;\n    openAddCreditModal(userId);\n  });\n};\n\nconst openAddCreditModal = (userId) => {\n  const modal = new ModalForm({\n    formClass: 'block_credits\\\\form\\\\credit_user_dynamic_form',\n    modalConfig: {scrollable: false, title: getString('addcredits', 'block_credits')},\n    args: {userid: userId, lockuser: userId > 0},\n  });\n  modal.addEventListener(modal.events.FORM_SUBMITTED, function(e) {\n    if (e.detail.redirecturl) {\n      window.location.href = e.detail.redirecturl;\n    } else {\n      window.location.reload();\n    }\n  });\n  modal.show();\n};\n"],"names":["selector","document","querySelector","addEventListener","e","userId","currentTarget","dataset","userid","openAddCreditModal","modal","ModalForm","formClass","modalConfig","scrollable","title","args","lockuser","events","FORM_SUBMITTED","detail","redirecturl","window","location","href","reload","show"],"mappings":";;;;;;;;oMA2BwCA,WACtCC,SAASC,cAAcF,UAAUG,iBAAiB,SAAUC,UACpDC,OAASD,EAAEE,cAAcC,QAAQC,OACvCC,mBAAmBJ,kBAIjBI,mBAAsBJ,eACpBK,MAAQ,IAAIC,mBAAU,CAC1BC,UAAW,gDACXC,YAAa,CAACC,YAAY,EAAOC,OAAO,mBAAU,aAAc,kBAChEC,KAAM,CAACR,OAAQH,OAAQY,SAAUZ,OAAS,KAE5CK,MAAMP,iBAAiBO,MAAMQ,OAAOC,gBAAgB,SAASf,GACvDA,EAAEgB,OAAOC,YACXC,OAAOC,SAASC,KAAOpB,EAAEgB,OAAOC,YAEhCC,OAAOC,SAASE,YAGpBf,MAAMgB"}