define("block_credits/modals",["exports","core_form/modalform","core/str"],(function(_exports,_modalform,_str){var obj;
/**
   * File.
   *
   * @module     block_credits/modals
   * @copyright  2023 Institut français du Japon
   * @author     Frédéric Massart <fred@branchup.tech>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */function delegateClick(regionSelector,selector,callback){document.querySelector(regionSelector).addEventListener("click",(e=>{const target=e.target.closest(selector);target&&(e.preventDefault(),callback(target))}))}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.registerAddCreditButton=_exports.delegateExpireNowButton=_exports.delegateChangeValidityButton=_exports.delegateAdjustTotalButton=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};_exports.registerAddCreditButton=selector=>{document.querySelector(selector).addEventListener("click",(e=>{e.preventDefault();const userId=e.currentTarget.dataset.userid,pageCtxId=e.currentTarget.dataset.pagectxid;openAddCreditModal(userId,pageCtxId)}))};_exports.delegateAdjustTotalButton=(regionSelector,selector)=>{delegateClick(regionSelector,selector,(target=>{const creditId=target.dataset.creditid,pageCtxId=target.dataset.pagectxid;openAdjustTotalModal(creditId,pageCtxId)}))};_exports.delegateChangeValidityButton=(regionSelector,selector)=>{delegateClick(regionSelector,selector,(target=>{const creditId=target.dataset.creditid,pageCtxId=target.dataset.pagectxid;openChangeValidityModal(creditId,pageCtxId)}))};_exports.delegateExpireNowButton=(regionSelector,selector)=>{delegateClick(regionSelector,selector,(target=>{const creditId=target.dataset.creditid,pageCtxId=target.dataset.pagectxid;openExpireNowModal(creditId,pageCtxId)}))};const openAddCreditModal=(userId,pageCtxId)=>{const modal=new _modalform.default({formClass:"block_credits\\form\\credit_user_dynamic_form",modalConfig:{scrollable:!1,title:(0,_str.get_string)("addcredits","block_credits")},args:{userid:userId,lockuser:userId>0,pagectxid:pageCtxId}});modal.addEventListener(modal.events.FORM_SUBMITTED,(function(e){e.detail.redirecturl?window.location.href=e.detail.redirecturl:window.location.reload()})),modal.show()},openAdjustTotalModal=(creditId,pageCtxId)=>{const modal=new _modalform.default({formClass:"block_credits\\form\\adjust_total_dynamic_form",modalConfig:{scrollable:!1,title:(0,_str.get_string)("adjustquantity","block_credits")},args:{creditid:creditId,pagectxid:pageCtxId}});modal.addEventListener(modal.events.FORM_SUBMITTED,(function(e){e.detail.redirecturl?window.location.href=e.detail.redirecturl:window.location.reload()})),modal.show()},openChangeValidityModal=(creditId,pageCtxId)=>{const modal=new _modalform.default({formClass:"block_credits\\form\\change_validity_dynamic_form",modalConfig:{scrollable:!1,title:(0,_str.get_string)("changevalidity","block_credits")},args:{creditid:creditId,pagectxid:pageCtxId}});modal.addEventListener(modal.events.FORM_SUBMITTED,(function(e){e.detail.redirecturl?window.location.href=e.detail.redirecturl:window.location.reload()})),modal.show()},openExpireNowModal=(creditId,pageCtxId)=>{const modal=new _modalform.default({formClass:"block_credits\\form\\expire_now_dynamic_form",modalConfig:{scrollable:!1,title:(0,_str.get_string)("expirenow","block_credits")},args:{creditid:creditId,pagectxid:pageCtxId}});modal.addEventListener(modal.events.FORM_SUBMITTED,(function(e){e.detail.redirecturl?window.location.href=e.detail.redirecturl:window.location.reload()})),modal.show()}}));

//# sourceMappingURL=modals.min.js.map